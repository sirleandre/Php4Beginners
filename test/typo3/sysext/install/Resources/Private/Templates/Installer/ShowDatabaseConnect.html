<div style="display: none;">
	<div id="t3js-installer-databaseConnect-execute-token">{executeDatabaseConnectToken}</div>
</div>

<h3>Database connection</h3>
<f:if condition="{hasAtLeastOneOption}">
	<f:then>
		<p>
			If you have not already created a username and password to access the database, please do so now.
			This can be done using tools provided by your host.
		</p>
		<div class="t3js-installer-databaseConnect-output"></div>
		<div class="row">
			<div class="col-md-6">
				<form method="post" class="form-horizontal">
					<div class="form-group">
						<label for="t3js-connect-database-driver" class="control-label col-md-2">Available</label>
						<div class="col-md-10">
							<select id="t3js-connect-database-driver" class="form-control" name="install[values][availableSet]">
								<f:if condition="{hasMysqliManualConfiguration}">
									<option
										value="mysqliManualConfiguration"
										{f:if(condition:'{activeAvailableOption} == mysqliManualConfiguration', then: 'selected="selected"')}
									>
									Manually configured MySQL TCP/IP connection
									</option>
								</f:if>
								<f:if condition="{hasMysqliSocketManualConfiguration}">
									<option
										value="mysqliSocketManualConfiguration"
										{f:if(condition:'{activeAvailableOption} == mysqliSocketManualConfiguration', then: 'selected="selected"')}
									>
									Manually configured MySQL socket connection
									</option>
								</f:if>
								<f:if condition="{hasPostgresManualConfiguration}">
									<option
										value="postgresManualConfiguration"
										{f:if(condition:'{activeAvailableOption} == postgresManualConfiguration', then: 'selected="selected"')}
									>
									Manually configured PostgreSQL connection
									</option>
								</f:if>
								<f:if condition="{hasConfigurationFromEnvironment}">
									<option
										value="configurationFromEnvironment"
										{f:if(condition:'{activeAvailableOption} == configurationFromEnvironment', then: 'selected="selected"')}
									>
									Configuration from environment variables
									</option>
								</f:if>
							</select>
						</div>
					</div>

					<f:if condition="{hasMysqliManualConfiguration}">
						<div id="mysqliManualConfiguration" class="t3-install-driver-data">
							<input type="hidden" value="mysqli" name="install[values][driver]"/>
							<div class="form-group">
								<label for="t3-install-step-mysqliManualConfiguration-username" class="control-label col-md-2">
									Username
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-mysqliManualConfiguration-username"
										class="form-control"
										type="text"
										value="{mysqliManualConfigurationOptions.username}"
										name="install[values][username]"
										autocomplete="off"
									/>
								</div>
							</div>
							<div class="form-group">
								<label for="t3-install-step-mysqliManualConfiguration-password" class="control-label col-md-2">
									Password
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-mysqliManualConfiguration-password"
										class="form-control"
										type="password"
										value="{mysqliManualConfigurationOptions.password}"
										name="install[values][password]"
										autocomplete="off"
									/>
								</div>
							</div>
							<div class="form-group">
								<label for="t3-install-step-mysqliManualConfiguration-host" class="control-label col-md-2">
									Host
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-mysqliManualConfiguration-host"
										class="t3-install-form-input-text form-control"
										type="text"
										value="{mysqliManualConfigurationOptions.host}"
										name="install[values][host]"
									/>
								</div>
							</div>
							<div class="form-group">
								<label for="t3-install-step-mysqliManualConfiguration-port" class="control-label col-md-2">
									Port
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-mysqliManualConfiguration-port"
										class="t3-install-form-input-text form-control"
										type="text"
										value="{mysqliManualConfigurationOptions.port}"
										name="install[values][port]"
									/>
								</div>
							</div>
						</div>
					</f:if>

					<f:if condition="{hasMysqliSocketManualConfiguration}">
						<div id="mysqliSocketManualConfiguration" class="t3-install-driver-data">
							<input type="hidden" value="mysqli" name="install[values][driver]"/>
							<div class="form-group">
								<label for="t3-install-step-mysqliSocketManualConfiguration-username" class="control-label col-md-2">
									Username
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-mysqliSocketManualConfiguration-username"
										class="form-control"
										type="text"
										value="{mysqliSocketManualConfigurationOptions.username}"
										name="install[values][username]"
										autocomplete="off"
									/>
								</div>
							</div>
							<div class="form-group">
								<label for="t3-install-step-mysqliSocketManualConfiguration-password" class="control-label col-md-2">
									Password
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-mysqliSocketManualConfiguration-password"
										class="form-control"
										type="password"
										value="{mysqliSocketManualConfigurationOptions.password}"
										name="install[values][password]"
										autocomplete="off"
									/>
								</div>
							</div>
							<input type="hidden" value="localhost" name="install[values][host]"/>
							<div class="form-group">
								<label for="t3-install-step-mysqliSocketManualConfiguration-socket" class="control-label col-md-2">
									Socket
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-mysqliSocketManualConfiguration-socket"
										class="t3-install-form-input-text form-control"
										type="text"
										value="{mysqliSocketManualConfigurationOptions.socket}"
										name="install[values][socket]"
										placeholder="Default socket or enter name"
									/>
								</div>
							</div>
						</div>
					</f:if>

					<f:if condition="{hasPostgresManualConfiguration}">
						<div id="postgresManualConfiguration" class="t3-install-driver-data">
							<input type="hidden" value="pdo_pgsql" name="install[values][driver]"/>
							<div class="form-group">
								<label for="t3-install-step-postgresManualConfiguration-username" class="control-label col-md-2">
									Username
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-postgresManualConfiguration-username"
										class="form-control"
										type="text"
										value="{postgresManualConfigurationOptions.username}"
										name="install[values][username]"
										autocomplete="off"
									/>
								</div>
							</div>
							<div class="form-group">
								<label for="t3-install-step-postgresManualConfiguration-password" class="control-label col-md-2">
									Password
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-postgresManualConfiguration-password"
										class="form-control"
										type="password"
										value="{postgresManualConfigurationOptions.password}"
										name="install[values][password]"
										autocomplete="off"
									/>
								</div>
							</div>
							<div class="form-group">
								<label for="t3-install-step-postgresManualConfiguration-database" class="control-label col-md-2">
									Database
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-postgresManualConfiguration-database"
										class="t3-install-form-input-text form-control"
										type="text"
										value="{postgresManualConfigurationOptions.database}"
										name="install[values][database]"
									/>
								</div>
							</div>
							<div class="form-group">
								<label for="t3-install-step-postgresManualConfiguration-host" class="control-label col-md-2">
									Host
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-postgresManualConfiguration-host"
										class="t3-install-form-input-text form-control"
										type="text"
										value="{postgresManualConfigurationOptions.host}"
										name="install[values][host]"
									/>
								</div>
							</div>
							<div class="form-group">
								<label for="t3-install-step-postgresManualConfiguration-port" class="control-label col-md-2">
									Port
								</label>
								<div class="col-md-10">
									<input
										id="t3-install-step-postgresManualConfiguration-port"
										class="t3-install-form-input-text form-control"
										type="text"
										value="{postgresManualConfigurationOptions.port}"
										name="install[values][port]"
									/>
								</div>
							</div>
						</div>
					</f:if>

					<f:if condition="{hasConfigurationFromEnvironment}">
						<div id="configurationFromEnvironment" class="t3-install-driver-data">
						</div>
					</f:if>

					<hr/>
					<button class="btn btn-success t3js-installer-databaseConnect-execute">
						Continue
					</button>
				</form>
			</div>
		</div>
	</f:then>

	<f:else>
		<div class="t3js-message typo3-message alert alert-danger" role="alert">
			<h4>No database driver found</h4>
			<p class="messageText">You have no database driver installed or enabled. Please install a driver in order to complete the database connection.</p>
		</div>
	</f:else>
</f:if>
